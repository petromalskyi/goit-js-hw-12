{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formEl = document.querySelector('form');\nconst listEl = document.querySelector('.gallery');\n\nformEl.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  listEl.innerHTML = '';\n  const userEntered = event.target.elements.name.value;\n\n  listEl.insertAdjacentHTML('afterend', '<span class=\"loader\"></span>');\n\n  getGallery(userEntered)\n    .then(data => {\n      if (data.hits.length === 0) {\n        const loaderEl = document.querySelector('.loader');\n        loaderEl.remove();\n\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          messageColor: '#ffffff',\n          titleColor: '#ffffff',\n          iconColor: '#ffffff',\n          backgroundColor: '#B51B1B',\n        });\n      } else {\n        return createMarkup(data.hits);\n      }\n    })\n    .catch(err => console.log(err));\n}\n\nfunction getGallery(userEntered) {\n  const BASE_URL = 'https://pixabay.com/api';\n  const API_KEY = '41437501-0a58a7d6f9b55a91ef815cfe0';\n  return fetch(\n    `${BASE_URL}/?key=${API_KEY}&q=${userEntered}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40`,\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n\nfunction createMarkup(array) {\n  const loaderEl = document.querySelector('.loader');\n  loaderEl.remove();\n\n  const markup = array.reduce(\n    (\n      html,\n      { largeImageURL, previewURL, tags, likes, views, comments, downloads },\n    ) =>\n      html +\n      `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n            class=\"gallery-image\"\n            src=\"${previewURL}\"\n            alt=\"${tags}\"\n            width=\"360\"\n            height=\"200\"\n            ;\n            />\n            <div class=\"gallery-info\">\n              <div class=\"gallery-box\">\n                <h3 class=\"gallery-title\">likes</h3>\n                <p class=\"gallery-text\">${likes}</p>\n                <!--hit.likes -->\n              </div>\n              <div class=\"gallery-box\">\n                <h3 class=\"gallery-title\">views</h3>\n                <p class=\"gallery-text\">${views}</p>\n              </div>\n              <div class=\"gallery-box\">\n                <h3 class=\"gallery-title\">comments</h3>\n                <p class=\"gallery-text\">${comments}</p>\n              </div>\n              <div class=\"gallery-box\">\n                <h3 class=\"gallery-title\">downloads</h3>\n                <p class=\"gallery-text\">${downloads}</p>\n              </div>\n            </div>\n         </a>\n       </li>`,\n    '',\n  );\n\n  listEl.innerHTML = markup;\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n"],"names":["formEl","listEl","handleSubmit","event","userEntered","getGallery","data","iziToast","createMarkup","err","resp","array","markup","html","largeImageURL","previewURL","tags","likes","views","comments","downloads","SimpleLightbox"],"mappings":"6vBAKA,MAAMA,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAS,SAAS,cAAc,UAAU,EAEhDD,EAAO,iBAAiB,SAAUE,CAAY,EAE9C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBF,EAAO,UAAY,GACnB,MAAMG,EAAcD,EAAM,OAAO,SAAS,KAAK,MAE/CF,EAAO,mBAAmB,WAAY,8BAA8B,EAEpEI,EAAWD,CAAW,EACnB,KAAKE,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EACN,SAAS,cAAc,SAAS,EACxC,OAAM,EAEfC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,WACV,aAAc,UACd,WAAY,UACZ,UAAW,UACX,gBAAiB,SAC3B,CAAS,MAED,QAAOC,EAAaF,EAAK,IAAI,CAErC,CAAK,EACA,MAAMG,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAClC,CAEA,SAASJ,EAAWD,EAAa,CAG/B,OAAO,MACL,qEAAiCA,uEACrC,EAAI,KAAKM,GAAQ,CACb,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAGjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASF,EAAaG,EAAO,CACV,SAAS,cAAc,SAAS,EACxC,OAAM,EAEf,MAAMC,EAASD,EAAM,OACnB,CACEE,EACA,CAAE,cAAAC,EAAe,WAAAC,EAAY,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAEtEP,EACA;AAAA;AAAA,wCAEkCC;AAAA;AAAA;AAAA,mBAGrBC;AAAA,mBACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAQuBC;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKAC;AAAA;AAAA;AAAA;AAAA,0CAIAC;AAAA;AAAA;AAAA;AAAA,0CAIAC;AAAA;AAAA;AAAA;AAAA,cAKtC,EACJ,EAEEnB,EAAO,UAAYW,EAEF,IAAIS,EAAe,aAAc,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB"}